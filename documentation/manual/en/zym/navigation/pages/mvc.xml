<?xml version="1.0" encoding="UTF-8"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xml:lang="en" xml:id="zym.navigation.pages.mvc" version="5.0">
    <title>Zym_Navigation_Page_Mvc</title>
    
    <para>
        MVC pages are defined using MVC parameters known from the 
        <code>Zend_Controller</code> component. An MVC page will use
        <classname>Zend_Controller_Action_Helper_Url</classname> internally
        in the <code>getHref()</code> method to generate hrefs, and
        in <code>isActive()</code> it will intersect the the 
        <classname>Zend_Controller_Request_Abstract</classname> params
        with its own params to determine if the page is active.
    </para>
    
    <table xml:id="zym.navigation.pages.mvc.options">
        <title>MVC page options</title>
           
        <info>
            <abstract>
                <para>
                    The options listed in the table below are specific to
                    <classname>Zym_Navigation_Page_Mvc</classname>.
                    All options refer to the according arguments in
                    <classname>Zend_Controller_Action_Helper_Url</classname>.
                </para> 
            </abstract>
        </info>       

        <tgroup cols="4">
            <thead>
                <row>
                    <entry>Key</entry>
                    <entry>Type</entry>
                    <entry>Default</entry>
                    <entry>Description</entry>
                </row>
            </thead>
            
            <tbody>
                <row>
                    <entry><code>action</code></entry>
                    <entry><code>string</code></entry>
                    <entry><code>null</code></entry>
                    <entry>
                        Action name to use when generating
                        href to the page.
                    </entry>
                </row>
                <row>
                    <entry><code>controller</code></entry>
                    <entry><code>string</code></entry>
                    <entry><code>null</code></entry>
                    <entry>
                        Controller name to use when generating
                        href to the page.
                    </entry>
                </row>
                <row>
                    <entry><code>module</code></entry>
                    <entry><code>string</code></entry>
                    <entry><code>null</code></entry>
                    <entry>
                        Module name to use when generating
                        href to the page.
                    </entry>
                </row>
                <row>
                    <entry><code>params</code></entry>
                    <entry><code>array</code></entry>
                    <entry><code>array()</code></entry>
                    <entry>
                        User params to use when generating href to the page.
                    </entry>
                </row>
                <row>
                    <entry><code>route</code></entry>
                    <entry><code>string</code></entry>
                    <entry><code>null</code></entry>
                    <entry>
                        Route name to use when generating
                        href to the page.
                    </entry>
                </row>
                <row>
                    <entry><code>reset_params</code></entry>
                    <entry><code>bool</code></entry>
                    <entry><code>true</code></entry>
                    <entry>
                        Whether user params should be reset
                        when generating href to the page.
                    </entry>
                </row>
            </tbody>
        </tgroup>
    </table>
    
    <note>
        <para>
            The three examples below assume a default MVC setup with 
            the <code>default</code> route in place.
        </para>
        
        <para>
            The URI returned is relative to the <code>baseUrl</code> in
            <code>Zend_Controller_Front</code>. In the examples, the baseUrl 
            is '/' for simplicity.
        </para>
    </note>
    
    <example xml:id="zym.navigation.pages.mvc.getHref">
        <title><code>getHref() generates the page URI</code></title>
	        
	    <para>
	        This example show that MVC pages use
	        <classname>Zend_Controller_Action_Helper_Url</classname> internally
	        to generate URIs when calling <code>$page->getHref()</code>.
	    </para>
        
        <programlisting role="php"><xi:include href="mvc/example/gethref.php" parse="text" /></programlisting>
    </example>
    
    <example xml:id="zym.navigation.pages.mvc.isActive">
        <title><code>isActive()</code> determines if page is active</title>
        
        <para>
            This example show that MVC pages determine whether they are active
            by using the params found in the request object.
        </para>
        
        <programlisting role="php"><xi:include href="mvc/example/isactive.php" parse="text" /></programlisting>
    </example>
    
    <example xml:id="zym.navigation.pages.mvc.routes">
        <title>Using routes</title>
        
        <para>
            MVC pages are aware of routes. Setting what route should be used
            when generating the URL is done by specifying the <code>route</code>
            option when constructing, or by calling 
            <code>$page->setRoute('routeName')</code> on a page instance.
        </para>
        
        <note>
            <para>
                Note that when using the <code>route</code> property in a page,
                you should also specify the default params the route uses 
                (module, controller, action, etc.), otherwise the <code>isActive()</code>
                method will not be able to determine if the page is active. The
                reason for this is that there is no way to get the default
                params from a <code>Zend_Controller_Router_Route</code> object.
            </para>
        </note>
        
        <programlisting role="php"><xi:include href="mvc/example/routes.php" parse="text" /></programlisting>
    </example>
</section>